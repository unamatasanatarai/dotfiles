#!/usr/bin/env bash

set -euo pipefail

. "$(dirname "$0")"/install-brew

ebox "Neovim setup"

einfo "Marksman"
asset=$(curl https://api.github.com/repos/artempyanykh/marksman/releases | jq -r '.[0].assets[] | select(.name=="marksman-macos") | .browser_download_url')
curl -o /tmp/marksman -OL "$asset"
mv /tmp/marksman ~/.local/bin/marksman
chmod +x ~/.local/bin/marksman
eok "Marksman"

einfo "BASH support"
npm i -g bash-language-server
brew install shellharden shfmt
eok "BASH support added"

einfo "HTML support"
npm i -g vscode-langservers-extracted
eok "HTML support added"

#  js-beautify \
#  prettier \
#  pyright \
#  svelte-language-server \
#  typescript typescript-language-server \
#
#eok "pyright"
#eok "typescript typescript-language-server"
#eok "svelte-language-server"
#eok "vscode-langservers-extracted"
#eok "prettier"
#eok "js-beautify"
#
#cargo install stylua shellharden
#
#eok "stylua"
#eok "shellharden"
#
brew install lua-language-server
eok "lua-language-server"

ebox "Force plugins installation"
nvim +PackerSync
eok "PackerSync has run"
