#!/usr/bin/env bash

set -euo pipefail

. "$(dirname "$0")"/install-brew

saybox "Install tools used by neovim"

wget -O /tmp/marksman https://github.com/artempyanykh/marksman/releases/download/2022-06-23/marksman-macos
mv /tmp/marksman ~/.local/bin/marksman
chmod u+x ~/.local/bin/marksman
sayok "marksman"

npm i -g \
  bash-language-server \
  js-beautify \
  prettier \
  pyright \
  svelte-language-server \
  typescript typescript-language-server \
  vscode-langservers-extracted \

sayok "bash-language-server"
sayok "pyright"
sayok "typescript typescript-language-server"
sayok "svelte-language-server"
sayok "vscode-langservers-extracted"
sayok "prettier"
sayok "js-beautify"

cargo install stylua shellharden

sayok "stylua"
sayok "shellharden"

brew install lua-language-server shfmt black
brew link black

sayok "lua-language-server"
sayok "shfmt"
sayok "black"

saybox "Force plugins installation"
nvim +PackerSync +qall
sayok "PackerSync has run"

saybox "Force install LspServers"
nvim +LspInstallServers
sayok "PackeLspInstallServers has completed"
