#!/usr/bin/env bash
# shellcheck disable=2154

function extract_git_branch_name {
  # make a copy of the previous exit status
  local ps=$?
  local branch
  branch=$(git_branch_read)
  [ "$branch" != "" ] && branch="<${branch}>"
  echo " $branch"
  # and return it so the redness can start
  return "$ps"
}

PS1=""
# current time
PS1+="\[${gray}\]\t"
# working directory full path
PS1+=" \[${green}\]\w"
# git branch
PS1+="\[${yellow}\]\$(extract_git_branch_name)\[${reset}\]"
# the dollar will be red if exit code was baaaad
PS1+=' $([ $? == 0 ] && echo "\[${white}\]\$ " || echo "\[${red}\]\$ ")'
PS1+="\[${reset}\]"

export PS1
