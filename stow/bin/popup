#!/usr/bin/env bash

set -euo pipefail

# Constants
readonly TITLE="TermPopup"

# Display help message
help() {
  cat << EOF
Usage: $(basename "$0") <command> [-s <spacing>]

Launch a command in a centered Alacritty terminal window.

Options:
  -s <spacing>  Spacing multiplier for vertical size (default: $DEFAULT_SPACING)
  -?            Show this help message

Example:
  $(basename "$0") 'htop' -s 2
EOF
}

# Parse command-line options
while getopts "s:?" opt; do
  case "$opt" in
    s) SPACING=${OPTARG} ;;
    ?) help; exit 0 ;;
    *) help; exit 1 ;;
  esac
done
shift $((OPTIND - 1))

# Validate command argument
if [[ $# -lt 1 ]]; then
  echo "Error: Command is required."
  help
  exit 1
fi
cmd="$1"

# Launch Alacritty
exec alacritty \
  -t "$TITLE" \
  --class "$TITLE" \
  -o window.position.y=0 \
  --working-directory "$PWD" \
  -e bash -c "$cmd"
