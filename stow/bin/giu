#!/usr/bin/env bash

# -----------------------------------------------------------------------------
# PRIVATE
# -----------------------------------------------------------------------------
function _username { # Set git config username
  git config user.name "${1}"
}

function _email { # Set git config E-Mail
  git config user.email "${1}"
}

# -----------------------------------------------------------------------------
# PUBLIC
# -----------------------------------------------------------------------------

function ue { # this is bordked now
  if [ "$#" -ne 2 ]; then
    echo "usage: ${0} ue 'USERNAME' 'EMAIL'"
    exit 1
  fi
  _username "${1}"
  _email "${2}"
}

function e { # alias for: `git config user.email "E-MAIL@ADDRE.SS"`
  [ -z "$1" ] && echo "usage: ${0} e \"EMAIL\"" || _email "${1}"
}

function u { # alias for: `git config user.name "yourusername"`
  [ -z "$1" ] && echo "usage: ${0} u \"USERNAME\"" || _username "${1}"
}

# -----------------------------------------------------------------------------

function _help { # Display this helpful help information
  printf "%s <task> [args]\n\nTasks:\n" "${0}"

  functions=$(compgen -A function | grep -v "^_")
  display=""

  for f in $functions; do
    display+="  $f#"
    display+=$(rg "function $f .*" "${0}" | awk -F '#' '{print $NF}')
    display+=$'\n'
  done

  echo "$display" | column -t -s "#"
}

"${@:-_help}"
