" Ensure Vim behaves in a modern way
set nocompatible
filetype off  " Required for some plugins, re-enabled later
set encoding=UTF-8  " Set default encoding to UTF-8

" Paths
set path=.,**,**
set runtimepath+=~/.config/vim

" Leader key setup
let mapleader = " "  " Set space as leader key
nnoremap j gj
nnoremap k gk
nnoremap gj j
nnoremap gk k

" Line numbers and navigation
set number          " Show absolute line number for current line
set relativenumber  " Show relative line numbers
set scrolloff=4     " Keep 4 lines visible above/below cursor
set sidescrolloff=5 " Keep 5 columns visible on sides

" Indentation settings
set tabstop=4      " Number of spaces a tab counts for
set shiftwidth=4   " Spaces for each indent step
set softtabstop=4  " Spaces for tab in insert mode
set expandtab      " Convert tabs to spaces
set smarttab       " Smart tab handling
set shiftround     " Round indent to multiple of shiftwidth

" Text display and formatting
set nowrap           " Wrap long lines
set linebreak      " Break lines at word boundaries
set textwidth=80   " Set max line width for formatting
set list
set listchars=tab:▷\ ,trail:·,nbsp:␣,extends:»,precedes:«  " Show special characters

" Search settings
set incsearch      " Highlight matches as you type
set hlsearch       " Highlight all search matches
set ignorecase     " Case-insensitive searching
set smartcase      " Case-sensitive if uppercase in search

" UI and feedback
set ruler
set cursorline     " Highlight current line
set showcmd        " Show partial commands
set showmatch      " Highlight matching brackets
set matchtime=1    " Show matching bracket for number of tenths of a seconds
set laststatus=2   " Always show status line
set visualbell     " Use visual bell instead of beeping
set t_vb=          " Disable visual bell flashing
set noerrorbells   " Disable beeps
set lazyredraw     " Don't redraw during macros
set ttyfast        " Faster redrawing
set background=dark  " Optimize for dark themes
colorscheme amber
if has("termguicolors")
    set termguicolors
endif

" Command-line completion
set wildmenu       " Enhanced command-line completion
set wildmode=longest:full,full
set wildignore+=*.pyc,node_modules/**,__pycache__/**,venv/**
set wildignorecase

" Performance and file handling
set noswapfile     " Disable swap files
set synmaxcol=20000 " Limit syntax highlighting for long lines
set updatetime=100 " Faster update time for responsiveness
set complete-=i    " Exclude included files from completion
set nrformats-=octal  " Treat numbers as decimal, not octal
set viminfo='50,<1000,s100,h,! " Save marks for the last 50 files, plus other info, save global marks (A-Z) across files
set grepprg=grep\ -HRIn\ $*


" Input and mappings
set backspace=indent,eol,start  " Allow backspace over indents, line breaks, etc.
inoremap <silent> jk <Esc>
inoremap <silent> kj <Esc>
nnoremap <leader>w :w<CR>
set timeout        " Enable timeout for mappings
set ttimeoutlen=10 " Fast timeout for key codes
set timeoutlen=200 " Timeout for mappings

" Encoding
set encoding=UTF-8  " Set default encoding to UTF-8

" Folding
set nofoldenable   " Disable code folding by default

" Display
set display+=lastline  " Show as much of the last line as possible

" Use tabs for Makefiles
autocmd FileType make setlocal noexpandtab tabstop=4 shiftwidth=4

" Pasting
"filetype plugin indent on " <- this plus formatoptions=qrn1 messess up pasing
"set formatoptions=qrn1  " Formatting options for text, messes up pasing along with filetype plugin indent on
set noautoindent     " Copy indent from current line
set nosmartindent    " Smart indenting for C-like programs
autocmd InsertLeave * set nopaste

syntax on

nnoremap <leader>r :silent! source $MYVIMRC<CR>
nnoremap <Leader><Space> :source ~/.config/vim/vimrc<CR>
