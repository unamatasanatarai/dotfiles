" Ensure Vim behaves in a modern way
set nocompatible
filetype off  " Required for some plugins, re-enabled later

" Enable file type detection and plugin/indent support
filetype plugin indent on
syntax on  " Enable syntax highlighting

" Leader key setup
let mapleader = " "  " Set space as leader key
nnoremap j gj
nnoremap k gk
nnoremap gj j
nnoremap gk k

" Line numbers and navigation
set number          " Show absolute line number for current line
set relativenumber  " Show relative line numbers
set scrolloff=4     " Keep 4 lines visible above/below cursor
set sidescrolloff=5 " Keep 5 columns visible on sides

" Indentation settings
set autoindent     " Copy indent from current line
set smartindent    " Smart indenting for C-like programs
set tabstop=4      " Number of spaces a tab counts for
set shiftwidth=4   " Spaces for each indent step
set softtabstop=4  " Spaces for tab in insert mode
set expandtab      " Convert tabs to spaces
set smarttab       " Smart tab handling
set shiftround     " Round indent to multiple of shiftwidth

" Filetype-specific indentation
augroup FiletypeIndent
  autocmd!
  autocmd FileType python   setlocal tabstop=4 shiftwidth=4 softtabstop=4 expandtab
  autocmd FileType javascript,typescript,json,yaml setlocal tabstop=2 shiftwidth=2 softtabstop=2 expandtab
  autocmd FileType html,css,scss setlocal tabstop=2 shiftwidth=2 softtabstop=2 expandtab
  autocmd FileType lua      setlocal tabstop=2 shiftwidth=2 softtabstop=2 expandtab
  autocmd FileType make     setlocal noexpandtab tabstop=4 shiftwidth=4 softtabstop=0
augroup END

" Text display and formatting
set wrap           " Wrap long lines
set linebreak      " Break lines at word boundaries
set textwidth=80   " Set max line width for formatting
set formatoptions=qrn1  " Formatting options for text
set listchars=tab:▷\ ,trail:·,nbsp:␣,extends:»,precedes:«  " Show special characters

" Search settings
set incsearch      " Highlight matches as you type
set hlsearch       " Highlight all search matches
set ignorecase     " Case-insensitive searching
set smartcase      " Case-sensitive if uppercase in search

" UI and feedback
set noruler
set statusline=%f\ %m\ %r\ %=%y\ %l:%c
set cursorline     " Highlight current line
set showcmd        " Show partial commands
set showmatch      " Highlight matching brackets
set matchtime=1    " Show matching bracket for number of tenths of a seconds
set laststatus=2   " Always show status line
set visualbell     " Use visual bell instead of beeping
set t_vb=          " Disable visual bell flashing
set noerrorbells   " Disable beeps
set lazyredraw     " Don't redraw during macros
set ttyfast        " Faster redrawing
set background=dark  " Optimize for dark themes
hi Normal guibg=NONE ctermbg=NONE ctermfg=214 guifg=#F57C00 cterm=NONE
hi StatusLine guibg=NONE ctermbg=NONE ctermfg=240 guifg=#F57C00 cterm=NONE
hi StatusLineNC guibg=NONE ctermbg=NONE ctermfg=240 guifg=#F57C00 cterm=NONE
hi TabLine guibg=NONE ctermbg=NONE ctermfg=240 guifg=#F57C00 cterm=NONE
hi TabLineNC guibg=NONE ctermbg=NONE ctermfg=240 guifg=#F57C00 cterm=NONE
hi LineNr ctermfg=240 ctermbg=NONE
hi CursorLineNr ctermbg=NONE ctermfg=244 cterm=none
hi CursorLine cterm=underline
nnoremap <Leader><Space> :source ~/.config/vim/vimrc<CR>

" Command-line completion
set wildmenu       " Enhanced command-line completion
set wildmode=longest:full,full

" Performance and file handling
set noswapfile     " Disable swap files
set synmaxcol=200  " Limit syntax highlighting for long lines
set updatetime=100 " Faster update time for responsiveness
set complete-=i    " Exclude included files from completion
set nrformats-=octal  " Treat numbers as decimal, not octal

" Input and mappings
set backspace=indent,eol,start  " Allow backspace over indents, line breaks, etc.
inoremap <silent> jk <Esc>
inoremap <silent> kj <Esc>
nnoremap <leader>w :w<CR>
set timeout        " Enable timeout for mappings
set ttimeoutlen=10 " Fast timeout for key codes
set timeoutlen=200 " Timeout for mappings

" Encoding
set encoding=UTF-8  " Set default encoding to UTF-8

" Folding
set nofoldenable   " Disable code folding by default

" Display
set display+=lastline  " Show as much of the last line as possible
